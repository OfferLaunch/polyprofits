---
description: Automatically run full git workflow when user says push to GitHub
alwaysApply: true
---

# Push to GitHub

When the user says **"push to github"**, **"push to GitHub"**, **"push"** (in the context of deploying code), or similar:

1. **Stage changes**: Run `git add -A` (or `git add` for modified files).
2. **Check status**: Run `git status`. If working tree is clean and already pushed, say so and stop.
3. **Commit if needed**: If there are staged changes, run `git commit` with a short, descriptive message (e.g. summarize the changes). If the user already described what changed, use that; otherwise infer from `git status`/diff.
4. **Push** (request network permission):
   - **If a `.env` file exists in the project root:** In the same shell, load it then push with token:  
     `cd <project-root> && ([ -f .env ] && set -a && . ./.env && set +a); git push https://${GITHUB_TOKEN}@github.com/OfferLaunch/polyprofits.git main`  
     (Use the project root path, e.g. /Users/tylerteves/PolyProfits.)
   - **Else:** Run `git push origin main`.
   - **If push fails** with `could not read Username` / `Device not configured` / authentication: tell the user to set up automatic push (see below) and give the one-liner:  
     `cd /Users/tylerteves/PolyProfits && git push origin main`

Do not ask "do you want me to push?" when they clearly said to pushâ€”just run the workflow.

**Automatic push from chat:** User creates a `.env` in the project root (gitignored) with `GITHUB_TOKEN=ghp_...` (GitHub Personal Access Token, classic, `repo` scope). The agent will use it for the push URL so push succeeds without opening the terminal. Never commit `.env` or put the token in tracked files. See `.env.example`.
